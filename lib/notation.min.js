!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("notation",[],e):"object"==typeof exports?exports.notation=e():t.notation=e()}(this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="lib/",r(r.s="./src/index.js")}({"./src/core/notation.error.js":function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){var e=u();return function(){var r,o=c(t);if(e){var a=c(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;return i(t)}(this,r)}}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,t)})(t)}function s(t,e,r){return(s=u()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&l(o,r.prototype),o}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.r(e),r.d(e,"NotationError",function(){return h});var f=Object.setPrototypeOf,h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(r,a(Error));var e=o(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),t=e.call(this,n),f(i(t),r.prototype),Object.defineProperty(i(t),"name",{enumerable:!1,writable:!1,value:"NotationError"}),Object.defineProperty(i(t),"message",{enumerable:!1,writable:!0,value:n}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(i(t),r):Object.defineProperty(i(t),"stack",{enumerable:!1,writable:!1,value:new Error(n).stack}),t}return r}()},"./src/core/notation.glob.js":function(t,e,r){"use strict";r.r(e),r.d(e,"Glob",function(){return p});var n=r("./src/core/notation.js"),o=r("./src/core/notation.error.js"),i=r("./src/utils.js");function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach(function(e){u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=/(\[(\d+|\*|".*"|'.*')\]|[a-z$_][a-z$_\d]*|\*)/gi,f=new RegExp("^!?(\\*|[a-z$_][a-z$_\\d]*|\\[(\\d+|\\*|\".*\"|'.*')\\])(\\[(\\d+|\\*|\".*\"|'.*')\\]|\\.[a-z$_][a-z$_\\d]*|\\.\\*)*$","i"),h=i.utils.re,v="Invalid glob notation: ",p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=t._inspect(e),n=t.split(r.absGlob);this._=s(s({},r),{},{notes:n,parent:void 0,regexp:void 0})}var e,r,a;return e=t,a=[{key:"create",value:function(e){return new t(e)}},{key:"isValid",value:function(t){return"string"==typeof t&&f.test(t)}},{key:"hasMagic",value:function(e){return t.isValid(e)&&(h.WILDCARDS.test(e)||"!"===e[0])}},{key:"toRegExp",value:function(e){if(!t.isValid(e))throw new o.NotationError("".concat(v," '").concat(e,"'"));var r=0===e.indexOf("!")?e.slice(1):e;return r=i.utils.pregQuote(r).replace(/\\\[\\\*\\\](?=(?:[^"]|"[^"]*")*$)(?=(?:[^']|'[^']*')*$)/g,"\\[\\d+\\]").replace(/\\\*(?=(?:[^"]|"[^"]*")*$)(?=(?:[^']|'[^']*')*$)/g,"[a-z$_][a-z$_\\d]*").replace(/\\\?/g,"."),new RegExp("^"+r+"(?:[\\[\\.].+|$)","i")}},{key:"_covers",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="string"==typeof e?new t(e):e,i="string"==typeof r?new t(r):r,a=o.notes||t.split(o.absGlob),s=i.notes||t.split(i.absGlob);if(!n&&o.isNegated&&a.length>s.length)return!1;for(var u=!0,l=n?g:y,c=0;c<a.length;c++)if(!l(a[c],s[c])){u=!1;break}return u}},{key:"_intersect",value:function(e,r){var n,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.split(e,!0),s=t.split(r,!0);n=o?"!"===e[0]||"!"===r[0]?"!":"":"!"===e[0]&&"!"===r[0]?"!":a.length>s.length&&"!"===e[0]||s.length>a.length&&"!"===r[0]?"!":"";for(var u,l,c=Math.max(a.length,s.length),f=[],v=0;v<c;v++)if((u=a[v])===(l=s[v]))f.push(u);else if(u&&h.WILDCARD.test(u))l?f.push(l):f.push(u);else if(l&&h.WILDCARD.test(l))u?f.push(u):f.push(l);else if(u&&!l)f.push(u);else{if(u||!l){f=[];break}f.push(l)}return f.length>0?n+i.utils.joinNotes(f):null}},{key:"_inspect",value:function(e){var r=e.trim();if(!t.isValid(r))throw new o.NotationError("".concat(v," '").concat(e,"'"));var n="!"===r[0];n||(r=i.utils.removeTrailingWildcards(r));var a=n?r.slice(1):r;return{glob:r,absGlob:a,isNegated:n,isArrayGlob:/^\[[^'"]/.test(a)}}},{key:"split",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.isValid(e))throw new o.NotationError("".concat(v," '").concat(e,"'"));return(!("!"===e[0])&&r?i.utils.removeTrailingWildcards(e):e).replace(/^!/,"").match(c)}},{key:"compare",value:function(e,r){if(e===r||h.WILDCARD.test(e)&&h.WILDCARD.test(r))return 0;var n=new t(e),o=new t(r);if(n.notes.length===o.notes.length){var i=N(n,o);if(0!==i)return i;var a=(n.absGlob.match(h.WILDCARDS)||[]).length,s=(o.absGlob.match(h.WILDCARDS)||[]).length;return a===s?!n.isNegated&&o.isNegated?-1:n.isNegated&&!o.isNegated?1:n.absGlob<o.absGlob?-1:n.absGlob>o.absGlob?1:0:a>s?-1:1}return n.notes.length<o.notes.length?-1:1}},{key:"sort",value:function(e){return e.sort(t.compare)}},{key:"normalize",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t._inspect,a=t._covers,s=t._intersect,u=i.utils.ensureArray(e);if(0===u.length)return[];var l=u.concat().sort(r?O:_).map(n);if(1===l.length){var c=l[0];return c.isNegated?[]:[c.glob]}var f=!1,v=[],p={},y={};function g(t,e){var n=s(t,e,r);if(n){var o,i=!r&&u.indexOf("!"===(o=n)[0]?o.slice(1):"!"+o)>=0;l.indexOf(n)>=0||i||(y[n]=n)}}return i.utils.eachRight(l,function(t,e){if(h.NEGATE_ALL.test(t.glob)&&(f=!0,r))return!1;var n=!1,s=!1,c=!1,y=!1,b=!1,d=!1,N=!1,w=!1;i.utils.eachRight(l,function(i,f){if(e!==f){if(t.isArrayGlob!==i.isArrayGlob)throw new o.NotationError("Integrity failed. Cannot have both object and array notations for root level: ".concat(JSON.stringify(u)));if(t.glob===i.glob)return l.splice(e,1),n=!0,!1;if(!t.isNegated&&function(t,e){return t.isNegated!==e.isNegated&&t.absGlob===e.absGlob}(t,i))return p[t.glob]=!0,s=!0,!1;if(!p[i.glob]){var h=a(t,i),v=!h&&a(i,t);if(t.isNegated)if(i.isNegated){if(v)return b=!0,p[t.glob]=!0,!1}else h&&(c=!0),v&&(y=!0),h||v||g(t.glob,i.glob);else if(i.isNegated){if(v)return N=!0,r?(p[t.glob]=!0,!1):void 0;h||v||g(t.glob,i.glob)}else if(h&&(d=h),v&&(w=!0,r))return!1}}});var O=r?(c||y)&&!1===b:y&&!1===b,_=r?(d||!1===w)&&!1===N:N||!1===w;!1===n&&!1===s&&(t.isNegated?O:_)?v.push(t.glob):p[t.glob]=!0}),r&&f?[]:(y=Object.keys(y)).length>0?(v=v.concat(y),t.normalize(v,r)):t.sort(v)}},{key:"_compareUnion",value:function(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=t._covers,s=t._inspect,u=t._intersect;return i.utils.eachRight(e,function(t){if(!(o.indexOf(t)>=0)){var e=s(t);if(h.WILDCARD.test(e.absGlob))o.push(e.glob);else{var l=!1,c=!1,f=!1,v=!1,p=!1,y=!1,g=[];i.utils.eachRight(r,function(r){t===r&&(c=!0);var i=s(r);if(l=!a(i,e)){if(e.isNegated&&i.isNegated){var h=u(e.glob,i.glob,n);h&&-1===o.indexOf(h)&&g.push(h)}}else e.isNegated?i.isNegated?f=!c:v=!0:i.isNegated?y=!0:p=!c});var b=e.isNegated?!v||f:!p||y;c||b||l&&!e.isNegated?o.push(e.glob):e.isNegated&&v&&!f&&g.length>0&&(o=o.concat(g))}}}),o}},{key:"union",value:function(e,r,n){var o=t.normalize,i=t._compareUnion,a=o(e,n),s=o(r,n);if(0===a.length)return s;if(0===s.length)return a;var u=i(a,s,n);return u=i(s,a,n,u),o(u,n)}}],(r=[{key:"test",value:function(e){if(!n.Notation.isValid(e))throw new o.NotationError("Invalid notation: '".concat(e,"'"));return t._covers(this,e)}},{key:"covers",value:function(e){return t._covers(this,e)}},{key:"intersect",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t._intersect(this.glob,e,r)}},{key:"glob",get:function(){return this._.glob}},{key:"absGlob",get:function(){return this._.absGlob}},{key:"isNegated",get:function(){return this._.isNegated}},{key:"regexp",get:function(){return this._.regexp=this._.regexp||t.toRegExp(this.absGlob),this._.regexp}},{key:"notes",get:function(){return this._.notes}},{key:"levels",get:function(){return this._.notes}},{key:"first",get:function(){return this.notes[0]}},{key:"last",get:function(){return this.notes[this.notes.length-1]}},{key:"parent",get:function(){return void 0===this._.parent&&(this._.parent=this.notes.length>1?this.absGlob.slice(0,-this.last.length).replace(/\.$/,""):null),this._.parent}}])&&l(e.prototype,r),a&&l(e,a),t}();function y(t,e){if(!t||!e)return!1;var r=h.ARRAY_GLOB_NOTE.test(e);return"*"===t?!r:"[*]"===t?r:!h.WILDCARD.test(e)&&i.utils.normalizeNote(t)===i.utils.normalizeNote(e)}function g(t,e){return!t||!e||(y(t,e)||y(e,t))}function b(t){return parseInt(t.replace(/[[\]]/,""),10)}function d(t,e){return b(t)>b(e)?-1:1}function N(t,e){var r=h.ARRAY_GLOB_NOTE;return t.isNegated&&e.isNegated&&t.notes.length===e.notes.length&&r.test(t.last)&&r.test(e.last)&&t.last!==e.last?"[*]"===t.last?1:"[*]"===e.last?-1:t.parent&&e.parent?(0,p._covers)(t.parent,e.parent,!0)?d(t.last,e.last):0:d(t.last,e.last):0}var w=/^\s*!/;function O(t,e){var r=w.test(t),n=w.test(e);return r&&n?t.length>=e.length?1:-1:r?-1:n?1:0}function _(t,e){var r=w.test(t),n=w.test(e);return r&&n?t.length>=e.length?1:-1:r?1:n?-1:0}},"./src/core/notation.js":function(t,e,r){"use strict";r.r(e),r.d(e,"Notation",function(){return p});var n=r("./src/core/notation.glob.js"),o=r("./src/core/notation.error.js"),i=r("./src/utils.js");function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach(function(e){u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c={SOURCE:"Invalid source. Expected a data object or array.",DEST:"Invalid destination. Expected a data object or array.",NOTATION:"Invalid notation: ",NOTA_OBJ:"Invalid notations object. ",NO_INDEX:"Implied index does not exist: ",NO_PROP:"Implied property does not exist: "},f=/(\[(\d+|".*"|'.*'|`.*`)\]|[a-z$_][a-z$_\d]*)/gi,h=new RegExp("^([a-z$_][a-z$_\\d]*|\\[(\\d+|\".*\"|'.*')\\])(\\[(\\d+|\".*\"|'.*')\\]|\\.[a-z$_][a-z$_\\d]*)*$","i"),v=Object.freeze({strict:!1,preserveIndices:!1}),p=function(){function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),0===arguments.length)this._source={};else{if(!i.utils.isCollection(e))throw new o.NotationError(c.SOURCE);this._source=e}this._isArray="array"===i.utils.type(this._source),this.options=r}var e,r,a;return e=t,a=[{key:"create",value:function(e,r){return 0===arguments.length?new t({}):new t(e,r)}},{key:"isValid",value:function(t){return"string"==typeof t&&h.test(t)}},{key:"split",value:function(e){if(!t.isValid(e))throw new o.NotationError(c.NOTATION+"'".concat(e,"'"));return e.match(f)}},{key:"join",value:function(t){return i.utils.joinNotes(t)}},{key:"countNotes",value:function(e){return t.split(e).length}},{key:"countLevels",value:function(e){return t.countNotes(e)}},{key:"first",value:function(e){return t.split(e)[0]}},{key:"last",value:function(e){var r=t.split(e);return r[r.length-1]}},{key:"parent",value:function(e){var r=t.last(e);return e.slice(0,-r.length).replace(/\.$/,"")||null}},{key:"eachNote",value:function(e,r){var n=t.split(e),o=[];i.utils.each(n,function(e,i){if(o.push(e),!1===r(t.join(o),e,i,n))return!1},t)}},{key:"eachLevel",value:function(e,r){t.eachNote(e,r)}}],(r=[{key:"each",value:function(t){return y(this._source,t),this}},{key:"eachValue",value:function(e,r){var n=this._source;return t.eachNote(e,function(t,e,o,a){if(n=i.utils.hasOwn(n,e)?n[e]:void 0,!1===r(n,t,e,o,a))return!1}),this}},{key:"getNotations",value:function(){var t=[];return this.each(function(e){t.push(e)}),t}},{key:"clone",value:function(){return this._source=i.utils.cloneDeep(this._source),this}},{key:"flatten",value:function(){var t={};return this.each(function(e,r,n){t[e]=n}),this._source=t,this}},{key:"expand",value:function(){return this._source=t.create({}).merge(this._source).value,this}},{key:"aggregate",value:function(){return this.expand()}},{key:"inspectGet",value:function(e){var r,n=this._source,o={has:!1,value:void 0};return t.eachNote(e,function(t,a,s){var u=i.utils.normalizeNote(a);if(!i.utils.hasOwn(n,u))return o={notation:e,has:!1,type:"undefined",level:s+1,lastNote:a,lastNoteNormalized:u},!1;n=n[u],r=n,o={notation:e,has:!0,value:n,type:i.utils.type(n),level:s+1,lastNote:a,lastNoteNormalized:u}}),(void 0===r||o.has&&r===o.value)&&(r=this._source),o.parentIsArray="array"===i.utils.type(r),o}},{key:"inspectRemove",value:function(e){if(!e)throw new Error(c.NOTATION+"'".concat(e,"'"));var r,n,o=t.parent(e),a=o?this.get(o,null):this._source,s="array"===i.utils.type(a),u=t.split(e),l=u[u.length-1],f=i.utils.normalizeNote(l);return i.utils.hasOwn(a,f)?(r={notation:e,has:!0,value:n=a[f],type:i.utils.type(n),level:u.length,lastNote:l,lastNoteNormalized:f,parentIsArray:s},!this.options.preserveIndices&&s?a.splice(f,1):delete a[f]):r={notation:e,has:!1,type:"undefined",level:u.length,lastNote:l,lastNoteNormalized:f,parentIsArray:s},r}},{key:"has",value:function(t){return this.inspectGet(t).has}},{key:"hasDefined",value:function(t){return void 0!==this.inspectGet(t).value}},{key:"get",value:function(t,e){var r=this.inspectGet(t);if(this.options.strict&&arguments.length<2&&!r.has){var n=r.parentIsArray?c.NO_INDEX:c.NO_PROP;throw new o.NotationError(n+"'".concat(t,"'"))}return r.has?r.value:e}},{key:"set",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"overwrite";if(!e.trim())throw new o.NotationError(c.NOTATION+"'".concat(e,"'"));!0===n&&(n="overwrite");var a,s,u,l,f,h=this._source,v="Cannot set value by inserting at index, on an object";return t.eachNote(e,function(e,c,p,y){if(a=p===y.length-1,s=u||i.utils.normalizeNote(c),u=a?null:i.utils.normalizeNote(y[p+1]),"array"===(f=i.utils.type(h))&&"number"!=typeof s){var g=t.parent(e)||"source";throw new o.NotationError("Cannot set string key '".concat(c,"' on array ").concat(g))}if(i.utils.hasOwn(h,s,f))if(a){if("overwrite"===n)h[s]=r;else if("insert"===n){if("array"!==f)throw new o.NotationError(v);h.splice(s,0,r)}}else h=h[s];else{if(a&&"array"!==f&&"insert"===n)throw new o.NotationError(v);l="number"==typeof u,h[s]=a?r:l?[]:{},h=h[s]}}),this}},{key:"merge",value:function(t){var e,r=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("object"!==i.utils.type(t))throw new o.NotationError(c.NOTA_OBJ+"Expected an object.");return i.utils.each(Object.keys(t),function(o){if(o.includes("__proto__")||o.includes("prototype")||o.includes("constructor"))return this;e=t[o],r.set(o,e,n)}),this}},{key:"separate",value:function(e){var r=this;if("array"!==i.utils.type(e))throw new o.NotationError(c.NOTA_OBJ+"Expected an array.");var n=new t({});return i.utils.each(e,function(t){var e=r.inspectRemove(t);n.set(t,e.value)}),this._source=n._source,this}},{key:"filter",value:function(e){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.utils.re,u=n.Glob.normalize(e,a.restrictive),l=u.length,c=this._isArray?[]:{};if(0===l||1===l&&(!u[0]||s.NEGATE_ALL.test(u[0])))return this._source=c,this;var f,h=i.utils.cloneDeep(this.value),v=s.WILDCARD.test(u[0]);return 1===l&&v?(this._source=h,this):(v?(f=new t(h),u.shift()):f=new t(c),i.utils.each(u,function(e){var a,u,l,c=new n.Glob(e),h=c.glob,v=c.absGlob,p=c.isNegated,g=c.levels;".*"===v.slice(-2)?(a=v.slice(0,-2),p&&(u={}),l="object"):"[*]"===v.slice(-3)?(a=v.slice(0,-3),p&&(u=[]),l="array"):a=v;var b="Integrity failed for glob '".concat(h,"'. Cannot set empty ").concat(l," for '").concat(a,"' which has a type of ");if(!1===s.WILDCARDS.test(a)){if(p){var d=f.inspectRemove(a);if(u){var N=d.type,w=b+"'".concat(N,"'."),O=i.utils.isset(d.value);if(O&&N!==l||!O&&r.options.strict)throw new o.NotationError(w);var _=d.parentIsArray?"insert":"overwrite";f.set(a,u,_)}}else{var m=r.inspectGet(a);m.has&&f.set(a,m.value,"overwrite")}return!0}y(r._source,function(e,s,h){if(!n.Glob.create(a).covers(e))return!0;if(r.options.strict&&u){var v=i.utils.type(h);if(v!==l&&t.split(e).length===g.length-1)throw new o.NotationError(b+"'".concat(v,"'."))}t.eachNote(e,function(e){if(c.test(e)){var r=t.split(e).length;if(p&&g.length<=r)return f.remove(e),!1;f.set(e,h,"overwrite")}})},!0)}),this._source=f.value,this)}},{key:"remove",value:function(t){var e=this.inspectRemove(t);if(this.options.strict&&!e.has){var r=e.parentIsArray?c.NO_INDEX:c.NO_PROP;throw new o.NotationError(r+"'".concat(t,"'"))}return this}},{key:"delete",value:function(t){return this.remove(t),this}},{key:"copyTo",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!i.utils.isCollection(e))throw new o.NotationError(c.DEST);var s=this.inspectGet(r);if(s.has){var u=i.utils.getNewNotation(n,r);t.create(e).set(u,s.value,a)}return this}},{key:"copyFrom",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!i.utils.isCollection(e))throw new o.NotationError(c.DEST);var s=t.create(e).inspectGet(r);if(s.has){var u=i.utils.getNewNotation(n,r);this.set(u,s.value,a)}return this}},{key:"moveTo",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!i.utils.isCollection(e))throw new o.NotationError(c.DEST);var s=this.inspectRemove(r);if(s.has){var u=i.utils.getNewNotation(n,r);t.create(e).set(u,s.value,a)}return this}},{key:"moveFrom",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!i.utils.isCollection(e))throw new o.NotationError(c.DEST);var s=t.create(e).inspectRemove(r);if(s.has){var u=i.utils.getNewNotation(n,r);this.set(u,s.value,a)}return this}},{key:"rename",value:function(t,e,r){return this.moveTo(this._source,t,e,r)}},{key:"renote",value:function(t,e,r){return this.rename(t,e,r)}},{key:"extract",value:function(t,e){var r={};return this.copyTo(r,t,e),r}},{key:"copyToNew",value:function(t,e){return this.extract(t,e)}},{key:"extrude",value:function(t,e){var r={};return this.moveTo(r,t,e),r}},{key:"moveToNew",value:function(t,e){return this.extrude(t,e)}},{key:"options",get:function(){return this._options},set:function(t){this._options=s(s(s({},v),this._options||{}),t||{})}},{key:"value",get:function(){return this._source}}])&&l(e.prototype,r),a&&l(e,a),t}();function y(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:null)||t;i.utils.eachItem(t,function(t,s){var u="number"==typeof s?"[".concat(s,"]"):s,l=p.join([o,u]),c=i.utils.isCollection(t);if((!c||n)&&!1===e(l,u,t,a))return!1;c&&y(t,e,r,n,l,a)},null,r)}p.Error=o.NotationError,p.Glob=n.Glob,p.utils=i.utils},"./src/index.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/core/notation.js");r.d(e,"Notation",function(){return n.Notation})},"./src/utils.js":function(t,e,r){"use strict";r.r(e),r.d(e,"utils",function(){return f});var n=r("./src/core/notation.error.js"),o=Object.prototype,i="function"==typeof Symbol?Symbol.prototype.valueOf:null,a=/^[a-z$_][a-z$_\d]*$/i,s=/^\[(\d+)\]$/,u=/^\[(?:'(.*)'|"(.*)"|`(.*)`)\]$/,l=/^(?!!)(.+?)(\.\*|\[\*\])+$/,c=/\w*$/,f={re:{VAR:a,ARRAY_NOTE:s,ARRAY_GLOB_NOTE:/^\[(\d+|\*)\]$/,OBJECT_BRACKETS:u,WILDCARD:/^(\[\*\]|\*)$/,WILDCARDS:/(\*|\[\*\])(?=(?:[^"]|"[^"]*")*$)(?=(?:[^']|'[^']*')*$)/,NON_NEG_WILDCARD_TRAIL:l,NEGATE_ALL:/^!(\*|\[\*\])$/},type:function(t){return o.toString.call(t).match(/\s(\w+)/i)[1].toLowerCase()},isCollection:function(t){var e=f.type(t);return"object"===e||"array"===e},isset:function(t){return null!=t},ensureArray:function(t){return"array"===f.type(t)?t:null==t?[]:[t]},hasOwn:function(t,e,r){return!!t&&("array"===(r||f.type(t))||"string"!=typeof e?"number"==typeof e&&(e>=0&&e<t.length):e&&o.hasOwnProperty.call(t,e))},cloneDeep:function(t){switch(f.type(t)){case"date":return new Date(t.valueOf());case"regexp":var e=c.exec(t).toString(),r=new t.constructor(t.source,e);return r.lastIndex=t.lastIndex,r;case"symbol":return i?Object(i.call(t)):t;case"array":return t.map(f.cloneDeep);case"object":var n={};return Object.keys(t).forEach(function(e){n[e]=f.cloneDeep(t[e])}),n;default:return t}},each:function(t,e,r){for(var n=t.length,o=-1;++o<n;)if(!1===e.apply(r,[t[o],o,t]))return},eachRight:function(t,e,r){for(var n=t.length;n--;)if(!1===e.apply(r,[t[n],n,t]))return},eachProp:function(t,e,r){for(var n=Object.keys(t),o=-1;++o<n.length;){var i=n[o];if(!1===e.apply(r,[t[i],i,t]))return}},eachItem:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return"array"===f.type(t)?n?f.eachRight(t,e,r):f.each(t,e,r):f.eachProp(t,e,r)},pregQuote:function(t){return String(t).replace(/[.\\+*?[^\]$(){}=!<>|:-]/g,"\\$&")},stringOrArrayOf:function(t,e){return"string"==typeof e&&(t===e||"array"===f.type(t)&&1===t.length&&t[0]===e)},hasSingleItemOf:function(t,e){return 1===t.length&&(2!==arguments.length||t[0]===e)},removeTrailingWildcards:function(t){return t.replace(l,"$1")},normalizeNote:function(t){if(a.test(t))return t;var e=t.match(s);if(e)return parseInt(e[1],10);if(e=t.match(u))return e[1]||e[2]||e[3];throw new n.NotationError("Invalid note: '".concat(t,"'"))},joinNotes:function(t){var e=t.length-1;return t.map(function(r,n){if(!r)return"";var o=e>=n+1?t[n+1]:null;return r+(o?"["===o[0]?"":".":"")}).join("")},getNewNotation:function(t,e){var r,o="Invalid new notation: '".concat(t,"'");if("string"==typeof t){if(!(r=t.trim()))throw new n.NotationError(o);return r}if(e&&!f.isset(t))return e;throw new n.NotationError(o)}}}})});
